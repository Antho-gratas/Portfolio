---
import { getCollection, CollectionEntry } from 'astro:content';
import PostLayout from '../../layouts/PostLayout.astro';
import Head from '../../components/Head.astro';
import TitlePost from '../../components/TitlePost.astro';
import Header from '../../components/Header.astro';
import { Picture } from 'astro:assets';
import blur from '/src/assets/img/bg.svg';

export async function getStaticPaths() {
	const posts = await getCollection('posts');
	return posts.map((post) => ({
		params: { slug: post.slug },
		props: post,
	}));
}

type Props = CollectionEntry<'posts'>;
const post = Astro.props;
const { Content } = await post.render();
---

<Head title={`OV Blog - ${post.data.title}`} />
<Picture
	src={blur}
	class='fixed blur-[100px] top-0 bottom-0 left-0 right-0 m-auto h-full w-full object-cover object-center z-[-1]'
	alt='blur background'
	formats={['avif', 'webp']}
/>
<PostLayout>
	<Header />
	<article
		class='p-5 bg-background-0 backdrop-blur-lg backdrop-opacity-50 rounded-2xl'>
		<Picture
			src={post.data.image}
			alt={post.data.title}
			width='1024'
			height='600'
			formats={['avif', 'webp']}
			class='rounded-2xl mb-10 mx-auto object-cover'
		/>
		<h3
			class='mb-4 my-auto text-xs font-light bg-background-0 backdrop-blur-lg backdrop-opacity-50 rounded-2xl px-2 py-1 inline-flex items-center'>
			<svg
				class='w-6 inline-block mr-1 my-auto'
				fill='none'
				stroke='currentColor'
				stroke-width='1'
				viewBox='0 0 24 24'
				xmlns='http://www.w3.org/2000/svg'
				aria-hidden='true'>
				<path
					stroke-linecap='round'
					stroke-linejoin='round'
					d='M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z'
				></path>
			</svg>
			{post.data.author}
		</h3>
		<date
			class='ml-2 mb-4 my-auto text-xs font-light bg-background-0 backdrop-blur-lg backdrop-opacity-50 rounded-2xl px-2 py-1 inline-flex items-center'>
			<svg
				class='w-6 inline-block mr-1 my-auto'
				fill='none'
				stroke='currentColor'
				stroke-width='1'
				viewBox='0 0 24 24'
				xmlns='http://www.w3.org/2000/svg'
				aria-hidden='true'>
				<path
					stroke-linecap='round'
					stroke-linejoin='round'
					d='M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z'
				></path>
			</svg>
			{post.data.publishDate}
		</date>
		<h3
			class='mb-4 ml-2 my-auto text-xs font-light bg-background-0 backdrop-blur-lg backdrop-opacity-50 rounded-2xl px-2 py-1 inline-flex items-center'>
			<svg
				class='w-6 inline-block mr-1 my-auto'
				fill='none'
				stroke='currentColor'
				stroke-width='1'
				viewBox='0 0 24 24'
				xmlns='http://www.w3.org/2000/svg'
				aria-hidden='true'>
				<path
					stroke-linecap='round'
					stroke-linejoin='round'
					d='M6 6.878V6a2.25 2.25 0 012.25-2.25h7.5A2.25 2.25 0 0118 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 004.5 9v.878m13.5-3A2.25 2.25 0 0119.5 9v.878m0 0a2.246 2.246 0 00-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0121 12v6a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 18v-6c0-.98.626-1.813 1.5-2.122'
				></path>
			</svg>
			{post.data.categories}
		</h3>
			<h3
			class='mb-4 ml-2 my-auto text-xs font-light bg-background-0 backdrop-blur-lg backdrop-opacity-50 rounded-2xl px-2 py-1 inline-flex items-center'>
			<svg
				class='w-6 inline-block mr-1 my-auto'
				fill='none'
				stroke='currentColor'
				stroke-width='1'
				viewBox='0 0 24 24'
				xmlns='http://www.w3.org/2000/svg'
				aria-hidden='true'>
				<path
					stroke-linecap='round'
					stroke-linejoin='round'
					d='M5.25 8.25h15m-16.5 7.5h15m-1.8-13.5l-3.9 19.5m-2.1-19.5l-3.9 19.5'
				></path>
			</svg>
				{ post.data.tags } 
		</h3>
		<div>
			<TitlePost h1={post.data.title} />
			<div
				class='mb-10 mt-5 prose lg:prose-xl text-xl font-light subpixel-antialiased tracking-wide text-white'>
				<Content />
			</div>
		</div>
	</article>
</PostLayout>
